<div class="text-center user_profile">

 <!-- SECTION -->
  <div class="country-image" style="background-image: linear-gradient(45deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2) ), url('<%= @country.photo.url %>');">
    <!--     <%= link_to "#{@country.photographer_first_name} #{@country.photographer_last_name} / Unsplash", @country.unsplash_url_utm %> -->
    <div class="country-info">
      <div><h1><%= @country.name %></h1></div>
      <div class="stars-box">
        <% if @country.average_rating > 0 %>
          <% @country.average_rating.round.times do %>
            <i class="fa fa-star stars" aria-hidden="true"></i>
          <% end %>
        <% end %>
      </div>
      <% unless @slip.empty? %>
        <div><a href="<%=@url%>" target="_blank">Check flight prices: <%= @slip.first %></a></div>
      <% end %>
    </div>
    <div class="country-stats">
        <div>
          <h3><i class="fa fa-globe" aria-hidden="true"></i> Continent</h3>
          <p><%= @country.continent %></p>
        </div>

        <div>
          <h3><i class="fa fa-map-signs" aria-hidden="true"></i> Capital</h3>
          <p><%= @country.capital %></p>
        </div>

        <div>
          <h3><i class="fa fa-money" aria-hidden="true"></i> Currency</h3>
          <p><%= @country.currency_name %></p>
        </div>

        <% unless @country.languages.nil? %>
          <div>
            <h3><i class="fa fa-language" aria-hidden="true"></i> Languages</h3>
            <p><%= @country.languages_prettified %></p>
          </div>
        <% end %>

        <% unless @country.population.nil? %>
          <div>
            <h3><i class="fa fa-user" aria-hidden="true"></i> Pop.</h3>
            <p><%= @country.population %></p>
          </div>
        <% end %>

        <% unless @country.national_dish.nil? %>
          <div>
            <h3><i class="fa fa-cutlery" aria-hidden="true"></i> National Dish</h3>
            <p><%= @country.national_dish %></p>
          </div>
        <% end %>

        <% unless @country.avg_temperature_in_celsius.nil? %>
          <div>
            <h3><i class="fa fa-thermometer-half" aria-hidden="true"></i> Avg. Temp.</h3>
            <p><%= @country.avg_temperature_in_celsius %> C </p>
          </div>
        <% end %>

        <% unless @country.landlocked.nil? %>
          <% if @country.landlocked == true %>
            <div>
              <h3><i class="fa fa-ship" aria-hidden="true"></i>Landlocked?</h3>
              <p>Yes</p>
            </div>
          <% else %>
            <div>
              <h3><i class="fa fa-ship" aria-hidden="true"></i>Landlocked?</h3>
              <p>No</p>
            </div>
          <% end %>
        <% end %>
    </div>
  </div>



<!-- SECTION -->
<!--   <div class="dashboard-container">
 -->  <!--   <% if @country.average_rating > 0 %>
      <div style="background: linear-gradient(45deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.2) ), url('https://images.unsplash.com/photo-1503221043305-f7498f8b7888?auto=format&fit=crop&w=1035&q=60&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D'); background-size: cover;" class="dashboard-item-country">
        <div class="country-box-text">
          <h3>Average Rating</h3>
          <p><%= @country.average_rating %></p>
        </div>
      </div>
    <% end %> -->

    <!-- <div style="background: linear-gradient(45deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.2) ), url('https://images.unsplash.com/photo-1487581424120-18f3611a63e6?auto=format&fit=crop&w=1026&q=60&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D'); background-size: cover;" class="dashboard-item-country">
      <div class="country-box-text">
        <h3>Continent</h3>
        <p><%= @country.continent %></p>
      </div>
    </div>

    <div style="background: linear-gradient(45deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.2) ), url('https://images.unsplash.com/photo-1490430657723-4d607c1503fc?auto=format&fit=crop&w=1050&q=60&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D'); background-size: cover;" class="dashboard-item-country">
      <div class="country-box-text">
        <h3>Capital</h3>
        <p><%= @country.capital %></p>
      </div>
    </div>

    <div style="background: linear-gradient(45deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.2) ), url('https://images.unsplash.com/photo-1443110189928-4448af4a2bc5?auto=format&fit=crop&w=897&q=60&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D'); background-size: cover;" class="dashboard-item-country">
      <div class="country-box-text">
        <h3>Currency</h3>
        <p><%= @country.currency_name %></p>
      </div>
    </div>

    <% unless @country.languages.nil? %>
      <div style="background: linear-gradient(45deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.2) ), url('https://images.unsplash.com/photo-1494552671665-4b5d938da5aa?auto=format&fit=crop&w=1502&q=60&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D'); background-size: cover;" class="dashboard-item-country">
        <div class="country-box-text">
          <h3>Languages</h3>
          <p><%= @country.languages_prettified %></p>
        </div>
      </div>
    <% end %>

    <% unless @country.population.nil? %>
      <div style="background: linear-gradient(45deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.2) ), url('https://images.unsplash.com/photo-1489582558212-475fa5010897?auto=format&fit=crop&w=1051&q=60&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D'); background-size: cover;" class="dashboard-item-country">
        <div class="country-box-text">
          <h3>Population</h3>
          <p><%= @country.population %></p>
        </div>
      </div>
    <% end %>

    <% unless @country.national_dish.nil? %>
      <div style="background: linear-gradient(45deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.2) ), url('https://images.unsplash.com/photo-1478749485505-2a903a729c63?auto=format&fit=crop&w=1050&q=60&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D'); background-size: cover;" class="dashboard-item-country">
        <div class="country-box-text">
          <h3>National Dish</h3>
          <p><%= @country.national_dish %></p>
        </div>
      </div>
    <% end %>

    <% unless @country.avg_temperature_in_celsius.nil? %>
      <div style="background: linear-gradient(45deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.2) ), url('https://images.unsplash.com/photo-1459695452562-46cc57bef5f6?auto=format&fit=crop&w=1050&q=60&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D'); background-size: cover;" class="dashboard-item-country">
        <div class="country-box-text">
          <h3>Average Yearly Temperature</h3>
          <p><%= @country.avg_temperature_in_celsius %> C </p>
        </div>
      </div>
    <% end %>

    <% unless @country.landlocked.nil? %>
      <div style="background: linear-gradient(45deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.2) ), url('https://images.unsplash.com/photo-1503221043305-f7498f8b7888?auto=format&fit=crop&w=1035&q=60&ixid=dW5zcGxhc2guY29tOzs7Ozs%3D'); background-size: cover;" class="dashboard-item-country">
        <div class="country-box-text">
          <h3>Landlocked?</h3>
          <% if @country.landlocked == true %>
            <p>Yes</p>
          <% else %>
            <p>No</p>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
 -->
<!-- SECTION -->
  <div>
    <% if @destination.empty? %>
      <% %>
    <%else%>
       <h2>My Notes</h2>
        <div id="notesAbsent" class="user-destinations-card">
          <p id="notes"></p>
          <p>Feel free to add a note for  <%= @country.name %>.</p>
          <%= simple_form_for([@country, @destination.first], h: 4, method: :patch, remote: true) do |f| %>
            <%= f.input :notes, label: false %>
            <%= f.input :status, as: :hidden %>
            <%= f.submit class: "btn btn-warning", value: "Update Note" %>
            <div style="height: 3vh;"></div>
          <% end %>
        </div>
    <% end %>

    <% unless current_user.destinations.where(country_id: @country.id).empty? %>
      <h2>Reviews for <%= @country.name %></h2>
      <% if @country.reviews.empty? %>
        <div class="user-destinations-card">
          <p>No reviews yet for this country. Be the first to leave a review.</p>
          <p><%= link_to "Add Review", new_country_review_path(@country), :class => "btn btn-warning" %></p>
        </div>
      <% else %>
        <div class="user-destinations-card">
          <% @country.reviews.each do |review| %>
            <p class="review"><%= review.content %></p>
            <p class="rating"></p>
            <% review.rating.times do %>
              <i class="fa fa-star" aria-hidden="true"></i>
            <% end %>
              <% if current_user.reviews.include? review %>
                <p><%= link_to "Edit", edit_country_review_path(@country, review) %> <%= link_to "Delete", country_review_path(@country, review), method: :delete, data: { confirm: "Are you sure?"} %></p>
                <p><%= link_to "Add Review", new_country_review_path(@country), :class => "btn btn-warning" %></p>
              <% end %>
          <% end %>
        </div>
      <% end %>
    <% end %>
  </div>


<!-- SECTION -->
  <div id="map" class="country-map" style="height: 80vh;"></div>
  <% content_for(:after_js) do %>
    <%= javascript_tag do %>
      markers_json = <%= raw @hash.to_json %>;
      var handler = Gmaps.build('Google');
      handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
        markers = handler.addMarkers(markers_json);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
        if (markers.length == 0) {
          handler.getMap().setZoom(2);
        } else if (markers.length == 1) {
          handler.getMap().setZoom(4);
        }
      });
    <% end %>
  <% end %>
</div>
