<canvas id="<%= id %>" width="<%= @size %>" height="<%= @size %>"></canvas>

<%= content_for(:after_js) do %>
  <%= javascript_tag do %>
    let ctx_<%= j id %> = document.getElementById("<%= j id %>").getContext('2d');

    let data_<%= j id %> = {
      datasets: [{
        data: <%= raw data_set[:counts].slice(0, 9) %>,

        backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)',
                'rgba(255, 99, 132, 0.4)',
                'rgba(54, 162, 235, 0.4)',
                'rgba(255, 206, 86, 0.4)',
                'rgba(75, 192, 192, 0.4)',
                'rgba(153, 102, 255, 0.4)',
                'rgba(255, 159, 64, 0.4)',
                'rgba(255, 99, 132, 0.6)',
                'rgba(54, 162, 235, 0.6)',
                'rgba(255, 206, 86, 0.6)',
                'rgba(75, 192, 192, 0.6)',
                'rgba(153, 102, 255, 0.6)',
                'rgba(255, 159, 64, 0.6)',
            ]
    }],

      labels: <%= raw data_set[:labels].slice(0,9) %>

    };

    let options_<%= j id %> = {
        legend: {
          position: "left"
        }
    };

    let myPieChart_<%= j id %> = new Chart(ctx_<%= j id %>,{
      type: 'doughnut',
      data: data_<%= j id %>,
      options: options_<%= j id %>
    });
  <% end %>
<% end %>
